version: '3'
services:

  neo4j: 
    image: neo4j:3.5
    volumes: 
      - ./neo4j/data:/data
    ports:
      - 7474:7474 # admin interface
      - 7687:7687 # bolt
    # For development only!
    environment:
      NEO4J_AUTH: none

  twitter:
    build: ./data_collection
    volumes:
      - ./data_collection:/usr/local/src/data_collection
    command: python runner.py twitter
    restart: on-failure
    links:
      - neo4j
    environment:
      NEO4J_URI: bolt://neo4j:7687

  newsapi:
    build: ./data_collection
    volumes:
      - ./data_collection:/usr/local/src/data_collection
    command: python runner.py newsapi -t 600
    restart: on-failure
    links:
      - neo4j
    environment:
      NEO4J_URI: bolt://neo4j:7687

  corenlp:
    image: frnkenstien/corenlp
    ports:
      - 9000:9000
